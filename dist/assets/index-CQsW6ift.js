(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class B{constructor(e){this.gridSize=e,this.reset()}reset(){const e=Math.floor(this.gridSize/2);this.segments=[{x:e,y:e},{x:e-1,y:e},{x:e-2,y:e},{x:e-3,y:e},{x:e-4,y:e}],this.direction={x:1,y:0},this.nextDirection={x:1,y:0},this.growing=!1,this.directionQueue=[]}get head(){return this.segments[0]}queueDirection(e){const t=this.directionQueue,a=t.length>0?t[t.length-1]:this.direction;e.x===-a.x&&e.y===-a.y||e.x===a.x&&e.y===a.y||t.length<3&&t.push(e)}update(e){if(this.directionQueue.length>0){const a=this.directionQueue.shift();a.x===-this.direction.x&&a.y===-this.direction.y||(this.direction=a)}const t={x:this.head.x+this.direction.x,y:this.head.y+this.direction.y};e||(t.x<0&&(t.x=this.gridSize-1),t.x>=this.gridSize&&(t.x=0),t.y<0&&(t.y=this.gridSize-1),t.y>=this.gridSize&&(t.y=0)),this.segments.unshift(t),this.growing||this.segments.pop(),this.growing=!1}grow(){this.growing=!0}checkSelfCollision(){return this.segments.slice(1).some(e=>e.x===this.head.x&&e.y===this.head.y)}checkWallCollision(){return this.head.x<0||this.head.x>=this.gridSize||this.head.y<0||this.head.y>=this.gridSize}occupies(e,t){return this.segments.some(a=>a.x===e&&a.y===t)}}class F{constructor(e){this.gridSize=e,this.position={x:0,y:0},this.pulsePhase=0,this.spawnAnimation=0}spawn(e){let t,a=0;do t={x:Math.floor(Math.random()*this.gridSize),y:Math.floor(Math.random()*this.gridSize)},a++;while(e.occupies(t.x,t.y)&&a<1e3);this.position=t,this.spawnAnimation=1}update(e){this.pulsePhase+=e*3,this.spawnAnimation>0&&(this.spawnAnimation=Math.max(0,this.spawnAnimation-e*4))}isAt(e,t){return this.position.x===e&&this.position.y===t}}class D{constructor(){this.particles=[]}emit(e,t,a,s,r={}){for(let i=0;i<a;i++){const o=Math.PI*2*i/a+Math.random()*.5,d=(r.speed||120)+Math.random()*80;this.particles.push({x:e,y:t,vx:Math.cos(o)*d,vy:Math.sin(o)*d,life:1,decay:(r.decay||2)+Math.random()*1.5,size:(r.size||3)+Math.random()*2,color:s,friction:r.friction||.92})}}update(e){for(let t=this.particles.length-1;t>=0;t--){const a=this.particles[t];a.x+=a.vx*e,a.y+=a.vy*e,a.vx*=a.friction,a.vy*=a.friction,a.life-=a.decay*e,a.life<=0&&this.particles.splice(t,1)}}draw(e){for(const t of this.particles)e.save(),e.globalAlpha=t.life*.8,e.fillStyle=t.color,e.beginPath(),e.arc(t.x,t.y,t.size*t.life,0,Math.PI*2),e.fill(),e.restore()}clear(){this.particles=[]}}class M{constructor(e,t,a){this.gridSize=e,this.cellSize=t,this.offset=a}update(e,t,a){this.gridSize=e,this.cellSize=t,this.offset=a}draw(e,t){const{cellSize:a,offset:s,gridSize:r}=this;e.fillStyle=t||"rgba(255, 255, 255, 0.03)";for(let i=0;i<=r;i++)for(let o=0;o<=r;o++)e.beginPath(),e.arc(s.x+i*a,s.y+o*a,.7,0,Math.PI*2),e.fill()}cellCenter(e,t){return{x:this.offset.x+e*this.cellSize+this.cellSize/2,y:this.offset.y+t*this.cellSize+this.cellSize/2}}}class T{constructor(){this.callbacks={},this.setupKeyboard(),this.setupTouch(),this.setupMobileButtons()}on(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)}emit(e,t){this.callbacks[e]&&this.callbacks[e].forEach(a=>a(t))}setupKeyboard(){document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":case"w":case"W":e.preventDefault(),this.emit("direction",{x:0,y:-1});break;case"ArrowDown":case"s":case"S":e.preventDefault(),this.emit("direction",{x:0,y:1});break;case"ArrowLeft":case"a":case"A":e.preventDefault(),this.emit("direction",{x:-1,y:0});break;case"ArrowRight":case"d":case"D":e.preventDefault(),this.emit("direction",{x:1,y:0});break;case"p":case"P":this.emit("pause");break;case"Enter":this.emit("enter");break;case"Escape":this.emit("escape");break}})}setupTouch(){let e,t,a;const r=document.getElementById("game-canvas");r&&(r.addEventListener("touchstart",i=>{i.preventDefault();const o=i.touches[0];e=o.clientX,t=o.clientY,a=Date.now()},{passive:!1}),r.addEventListener("touchend",i=>{if(i.preventDefault(),!e||!t)return;const o=i.changedTouches[0],d=o.clientX-e,l=o.clientY-t;if(!(Date.now()-a>500)){if(Math.abs(d)<30&&Math.abs(l)<30){this.emit("pause");return}Math.abs(d)>Math.abs(l)?this.emit("direction",{x:d>0?1:-1,y:0}):this.emit("direction",{x:0,y:l>0?1:-1})}},{passive:!1}))}setupMobileButtons(){document.querySelectorAll(".dpad-btn").forEach(e=>{const t=e.dataset.dir,a={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},s=r=>{r.preventDefault(),a[t]&&this.emit("direction",a[t])};e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("mousedown",s)})}}const w={midnight:{id:"midnight",name:"Midnight",emoji:"ðŸŒ™",bgPrimary:"#0a0a0b",bgSecondary:"#111113",bgTertiary:"#18181b",bgElevated:"#1e1e22",bgHover:"#252529",borderSubtle:"#27272a",borderDefault:"#333338",borderStrong:"#444449",textPrimary:"#fafafa",textSecondary:"#a1a1aa",textTertiary:"#71717a",textMuted:"#52525b",accent:"#e4e4e7",snakeHead:"#e4e4e7",snakeBody:"#d4d4d8",snakeEye:"#1a1a1f",snakeEyePupil:"#fafafa",foodPrimary:"#f0abfc",foodGlow:"rgba(240, 171, 252, 0.12)",tongueFill:"#ff6b8a",gridDot:"rgba(255, 255, 255, 0.03)",wallStroke:"rgba(255, 255, 255, 0.06)",shineFill:"rgba(255, 255, 255, 0.15)",shadowFill:"rgba(212, 212, 216, 0.12)",successColor:"#86efac",dangerColor:"#fca5a5",canvasBg:"#111113",vignetteAlpha:.3},arctic:{id:"arctic",name:"Arctic",emoji:"â„ï¸",bgPrimary:"#f0f4f8",bgSecondary:"#e2e8f0",bgTertiary:"#cbd5e1",bgElevated:"#f8fafc",bgHover:"#dde5ed",borderSubtle:"#c5cfda",borderDefault:"#94a3b8",borderStrong:"#64748b",textPrimary:"#0f172a",textSecondary:"#475569",textTertiary:"#64748b",textMuted:"#94a3b8",accent:"#334155",snakeHead:"#1e293b",snakeBody:"#334155",snakeEye:"#e2e8f0",snakeEyePupil:"#0f172a",foodPrimary:"#3b82f6",foodGlow:"rgba(59, 130, 246, 0.15)",tongueFill:"#ef4444",gridDot:"rgba(0, 0, 0, 0.04)",wallStroke:"rgba(0, 0, 0, 0.08)",shineFill:"rgba(255, 255, 255, 0.25)",shadowFill:"rgba(51, 65, 85, 0.1)",successColor:"#22c55e",dangerColor:"#ef4444",canvasBg:"#e2e8f0",vignetteAlpha:.08},emerald:{id:"emerald",name:"Emerald",emoji:"ðŸŒ¿",bgPrimary:"#022c22",bgSecondary:"#052e16",bgTertiary:"#0a3a21",bgElevated:"#0f4a2e",bgHover:"#145a38",borderSubtle:"#166534",borderDefault:"#15803d",borderStrong:"#22c55e",textPrimary:"#ecfdf5",textSecondary:"#a7f3d0",textTertiary:"#6ee7b7",textMuted:"#34d399",accent:"#86efac",snakeHead:"#bbf7d0",snakeBody:"#86efac",snakeEye:"#052e16",snakeEyePupil:"#ecfdf5",foodPrimary:"#fbbf24",foodGlow:"rgba(251, 191, 36, 0.15)",tongueFill:"#f87171",gridDot:"rgba(134, 239, 172, 0.06)",wallStroke:"rgba(134, 239, 172, 0.1)",shineFill:"rgba(255, 255, 255, 0.12)",shadowFill:"rgba(134, 239, 172, 0.1)",successColor:"#a7f3d0",dangerColor:"#fca5a5",canvasBg:"#052e16",vignetteAlpha:.3},sunset:{id:"sunset",name:"Sunset",emoji:"ðŸŒ…",bgPrimary:"#1c0a00",bgSecondary:"#271200",bgTertiary:"#3b1c06",bgElevated:"#4a2512",bgHover:"#5c321c",borderSubtle:"#6b3a20",borderDefault:"#92400e",borderStrong:"#b45309",textPrimary:"#fff7ed",textSecondary:"#fed7aa",textTertiary:"#fdba74",textMuted:"#f97316",accent:"#fb923c",snakeHead:"#ffedd5",snakeBody:"#fdba74",snakeEye:"#3b1c06",snakeEyePupil:"#fff7ed",foodPrimary:"#f43f5e",foodGlow:"rgba(244, 63, 94, 0.15)",tongueFill:"#fb7185",gridDot:"rgba(251, 146, 60, 0.06)",wallStroke:"rgba(251, 146, 60, 0.1)",shineFill:"rgba(255, 255, 255, 0.12)",shadowFill:"rgba(253, 186, 116, 0.1)",successColor:"#86efac",dangerColor:"#fca5a5",canvasBg:"#271200",vignetteAlpha:.35},cyberpunk:{id:"cyberpunk",name:"Cyber",emoji:"ðŸ’œ",bgPrimary:"#0a0014",bgSecondary:"#110022",bgTertiary:"#1a0033",bgElevated:"#220044",bgHover:"#2d0055",borderSubtle:"#3b0070",borderDefault:"#6d28d9",borderStrong:"#8b5cf6",textPrimary:"#f5f3ff",textSecondary:"#c4b5fd",textTertiary:"#a78bfa",textMuted:"#7c3aed",accent:"#a78bfa",snakeHead:"#e9d5ff",snakeBody:"#c084fc",snakeEye:"#1a0033",snakeEyePupil:"#f5f3ff",foodPrimary:"#22d3ee",foodGlow:"rgba(34, 211, 238, 0.15)",tongueFill:"#f472b6",gridDot:"rgba(167, 139, 250, 0.06)",wallStroke:"rgba(167, 139, 250, 0.1)",shineFill:"rgba(255, 255, 255, 0.1)",shadowFill:"rgba(192, 132, 252, 0.1)",successColor:"#67e8f9",dangerColor:"#f472b6",canvasBg:"#110022",vignetteAlpha:.35},ocean:{id:"ocean",name:"Ocean",emoji:"ðŸŒŠ",bgPrimary:"#001220",bgSecondary:"#001a2e",bgTertiary:"#002240",bgElevated:"#003055",bgHover:"#003d66",borderSubtle:"#004477",borderDefault:"#0369a1",borderStrong:"#0ea5e9",textPrimary:"#f0f9ff",textSecondary:"#bae6fd",textTertiary:"#7dd3fc",textMuted:"#38bdf8",accent:"#7dd3fc",snakeHead:"#e0f2fe",snakeBody:"#7dd3fc",snakeEye:"#002240",snakeEyePupil:"#f0f9ff",foodPrimary:"#f472b6",foodGlow:"rgba(244, 114, 182, 0.15)",tongueFill:"#fb923c",gridDot:"rgba(125, 211, 252, 0.05)",wallStroke:"rgba(125, 211, 252, 0.1)",shineFill:"rgba(255, 255, 255, 0.12)",shadowFill:"rgba(125, 211, 252, 0.1)",successColor:"#86efac",dangerColor:"#fca5a5",canvasBg:"#001a2e",vignetteAlpha:.3},blood:{id:"blood",name:"Blood",emoji:"ðŸ©¸",bgPrimary:"#1a0000",bgSecondary:"#260000",bgTertiary:"#3b0000",bgElevated:"#4c0000",bgHover:"#5c0a0a",borderSubtle:"#6b1010",borderDefault:"#991b1b",borderStrong:"#dc2626",textPrimary:"#fef2f2",textSecondary:"#fecaca",textTertiary:"#fca5a5",textMuted:"#f87171",accent:"#f87171",snakeHead:"#fee2e2",snakeBody:"#fca5a5",snakeEye:"#3b0000",snakeEyePupil:"#fef2f2",foodPrimary:"#facc15",foodGlow:"rgba(250, 204, 21, 0.15)",tongueFill:"#fb923c",gridDot:"rgba(252, 165, 165, 0.05)",wallStroke:"rgba(252, 165, 165, 0.1)",shineFill:"rgba(255, 255, 255, 0.1)",shadowFill:"rgba(252, 165, 165, 0.1)",successColor:"#86efac",dangerColor:"#fef2f2",canvasBg:"#260000",vignetteAlpha:.35},sand:{id:"sand",name:"Sand",emoji:"ðŸœï¸",bgPrimary:"#faf5ef",bgSecondary:"#f0e6d6",bgTertiary:"#e2d5c1",bgElevated:"#f5efe6",bgHover:"#e8dcc8",borderSubtle:"#d6c9b0",borderDefault:"#b8a88e",borderStrong:"#8c7a62",textPrimary:"#2c1e0e",textSecondary:"#5c4a34",textTertiary:"#7c6a52",textMuted:"#a89478",accent:"#6b5740",snakeHead:"#3d2e1c",snakeBody:"#5c4a34",snakeEye:"#f0e6d6",snakeEyePupil:"#2c1e0e",foodPrimary:"#d97706",foodGlow:"rgba(217, 119, 6, 0.12)",tongueFill:"#dc2626",gridDot:"rgba(0, 0, 0, 0.04)",wallStroke:"rgba(0, 0, 0, 0.07)",shineFill:"rgba(255, 255, 255, 0.2)",shadowFill:"rgba(92, 74, 52, 0.1)",successColor:"#16a34a",dangerColor:"#dc2626",canvasBg:"#f0e6d6",vignetteAlpha:.06},golden:{id:"golden",name:"Golden",emoji:"âœ¨",bgPrimary:"#2F3E34",bgSecondary:"#344038",bgTertiary:"#3d4a40",bgElevated:"#45534a",bgHover:"#4e5c52",borderSubtle:"#5a6a5e",borderDefault:"#6E7F5E",borderStrong:"#D9A300",textPrimary:"#E8E3A1",textSecondary:"#E6C75C",textTertiary:"#D9A300",textMuted:"#6E7F5E",accent:"#D9A300",snakeHead:"#E6C75C",snakeBody:"#D9A300",snakeEye:"#2F3E34",snakeEyePupil:"#E8E3A1",foodPrimary:"#E8E3A1",foodGlow:"rgba(232, 227, 161, 0.15)",tongueFill:"#E6C75C",gridDot:"rgba(217, 163, 0, 0.06)",wallStroke:"rgba(217, 163, 0, 0.12)",shineFill:"rgba(230, 199, 92, 0.15)",shadowFill:"rgba(217, 163, 0, 0.1)",successColor:"#E6C75C",dangerColor:"#E8E3A1",canvasBg:"#344038",vignetteAlpha:.3},olive:{id:"olive",name:"Olive",emoji:"ðŸ«’",bgPrimary:"#5E5F58",bgSecondary:"#636460",bgTertiary:"#6e6f68",bgElevated:"#787974",bgHover:"#82837e",borderSubtle:"#8E8F84",borderDefault:"#A7B34D",borderStrong:"#C8C2B5",textPrimary:"#E5D8C4",textSecondary:"#C8C2B5",textTertiary:"#A7B34D",textMuted:"#8E8F84",accent:"#A7B34D",snakeHead:"#E5D8C4",snakeBody:"#A7B34D",snakeEye:"#5E5F58",snakeEyePupil:"#E5D8C4",foodPrimary:"#E5D8C4",foodGlow:"rgba(229, 216, 196, 0.15)",tongueFill:"#C8C2B5",gridDot:"rgba(167, 179, 77, 0.06)",wallStroke:"rgba(167, 179, 77, 0.12)",shineFill:"rgba(229, 216, 196, 0.12)",shadowFill:"rgba(167, 179, 77, 0.1)",successColor:"#A7B34D",dangerColor:"#E5D8C4",canvasBg:"#636460",vignetteAlpha:.25},neon:{id:"neon",name:"Neon",emoji:"ðŸ’š",bgPrimary:"#2E2E2E",bgSecondary:"#333333",bgTertiary:"#3d3d3d",bgElevated:"#454545",bgHover:"#4e4e4e",borderSubtle:"#555555",borderDefault:"#1B9AAA",borderStrong:"#2EC4B6",textPrimary:"#EAF5A3",textSecondary:"#A6D96A",textTertiary:"#2EC4B6",textMuted:"#1B9AAA",accent:"#A6D96A",snakeHead:"#EAF5A3",snakeBody:"#A6D96A",snakeEye:"#2E2E2E",snakeEyePupil:"#EAF5A3",foodPrimary:"#2EC4B6",foodGlow:"rgba(46, 196, 182, 0.18)",tongueFill:"#EAF5A3",gridDot:"rgba(166, 217, 106, 0.05)",wallStroke:"rgba(166, 217, 106, 0.1)",shineFill:"rgba(234, 245, 163, 0.12)",shadowFill:"rgba(166, 217, 106, 0.1)",successColor:"#A6D96A",dangerColor:"#EAF5A3",canvasBg:"#333333",vignetteAlpha:.3},hunter:{id:"hunter",name:"Hunter",emoji:"ðŸ¹",bgPrimary:"#1F1F1F",bgSecondary:"#262626",bgTertiary:"#302a24",bgElevated:"#3a332c",bgHover:"#443d34",borderSubtle:"#4F4038",borderDefault:"#7A5C3E",borderStrong:"#C9B79C",textPrimary:"#C9B79C",textSecondary:"#7A5C3E",textTertiary:"#4F6D3A",textMuted:"#5a4a38",accent:"#C73E1D",snakeHead:"#C9B79C",snakeBody:"#4F6D3A",snakeEye:"#1F1F1F",snakeEyePupil:"#C9B79C",foodPrimary:"#C73E1D",foodGlow:"rgba(199, 62, 29, 0.18)",tongueFill:"#C73E1D",gridDot:"rgba(79, 109, 58, 0.06)",wallStroke:"rgba(79, 109, 58, 0.12)",shineFill:"rgba(201, 183, 156, 0.12)",shadowFill:"rgba(79, 109, 58, 0.1)",successColor:"#4F6D3A",dangerColor:"#C73E1D",canvasBg:"#262626",vignetteAlpha:.35},tropical:{id:"tropical",name:"Tropical",emoji:"ðŸŒ´",bgPrimary:"#1a2e28",bgSecondary:"#1f352e",bgTertiary:"#264038",bgElevated:"#2d4a42",bgHover:"#34544c",borderSubtle:"#3d5e54",borderDefault:"#2A9D8F",borderStrong:"#6A994E",textPrimary:"#E9C46A",textSecondary:"#F4A261",textTertiary:"#6A994E",textMuted:"#2A9D8F",accent:"#F4A261",snakeHead:"#E9C46A",snakeBody:"#F4A261",snakeEye:"#1a2e28",snakeEyePupil:"#E9C46A",foodPrimary:"#E76F51",foodGlow:"rgba(231, 111, 81, 0.18)",tongueFill:"#E76F51",gridDot:"rgba(42, 157, 143, 0.06)",wallStroke:"rgba(42, 157, 143, 0.12)",shineFill:"rgba(233, 196, 106, 0.12)",shadowFill:"rgba(244, 162, 97, 0.1)",successColor:"#6A994E",dangerColor:"#E76F51",canvasBg:"#1f352e",vignetteAlpha:.3},matrix:{id:"matrix",name:"Matrix",emoji:"ðŸ–¥ï¸",bgPrimary:"#0B132B",bgSecondary:"#0f1833",bgTertiary:"#1C2541",bgElevated:"#23304d",bgHover:"#2a3b5a",borderSubtle:"#2e4060",borderDefault:"#5BC0BE",borderStrong:"#9BC53D",textPrimary:"#C7F464",textSecondary:"#9BC53D",textTertiary:"#5BC0BE",textMuted:"#3a5f5e",accent:"#C7F464",snakeHead:"#C7F464",snakeBody:"#9BC53D",snakeEye:"#0B132B",snakeEyePupil:"#C7F464",foodPrimary:"#5BC0BE",foodGlow:"rgba(91, 192, 190, 0.18)",tongueFill:"#C7F464",gridDot:"rgba(155, 197, 61, 0.05)",wallStroke:"rgba(155, 197, 61, 0.1)",shineFill:"rgba(199, 244, 100, 0.1)",shadowFill:"rgba(155, 197, 61, 0.1)",successColor:"#C7F464",dangerColor:"#5BC0BE",canvasBg:"#0f1833",vignetteAlpha:.35},coral:{id:"coral",name:"Coral",emoji:"ðŸª¸",bgPrimary:"#1e2a2a",bgSecondary:"#243232",bgTertiary:"#2c3c3c",bgElevated:"#334545",bgHover:"#3b4f4f",borderSubtle:"#445858",borderDefault:"#84A98C",borderStrong:"#2A9D8F",textPrimary:"#EAD2AC",textSecondary:"#C9ADA7",textTertiary:"#84A98C",textMuted:"#2A9D8F",accent:"#F94144",snakeHead:"#EAD2AC",snakeBody:"#C9ADA7",snakeEye:"#1e2a2a",snakeEyePupil:"#EAD2AC",foodPrimary:"#F94144",foodGlow:"rgba(249, 65, 68, 0.18)",tongueFill:"#F94144",gridDot:"rgba(132, 169, 140, 0.06)",wallStroke:"rgba(132, 169, 140, 0.1)",shineFill:"rgba(234, 210, 172, 0.12)",shadowFill:"rgba(201, 173, 167, 0.1)",successColor:"#84A98C",dangerColor:"#F94144",canvasBg:"#243232",vignetteAlpha:.3},inferno:{id:"inferno",name:"Inferno",emoji:"ðŸ”¥",bgPrimary:"#1a0a05",bgSecondary:"#241008",bgTertiary:"#30180e",bgElevated:"#3c2014",bgHover:"#48281a",borderSubtle:"#5a3020",borderDefault:"#9E2A2B",borderStrong:"#E36414",textPrimary:"#E9C46A",textSecondary:"#F4A261",textTertiary:"#E36414",textMuted:"#9E2A2B",accent:"#E36414",snakeHead:"#E9C46A",snakeBody:"#F4A261",snakeEye:"#4A0E0E",snakeEyePupil:"#E9C46A",foodPrimary:"#9E2A2B",foodGlow:"rgba(158, 42, 43, 0.2)",tongueFill:"#E9C46A",gridDot:"rgba(227, 100, 20, 0.06)",wallStroke:"rgba(227, 100, 20, 0.12)",shineFill:"rgba(233, 196, 106, 0.12)",shadowFill:"rgba(244, 162, 97, 0.1)",successColor:"#E9C46A",dangerColor:"#9E2A2B",canvasBg:"#241008",vignetteAlpha:.4},sakura:{id:"sakura",name:"Sakura",emoji:"ðŸŒ¸",bgPrimary:"#2a1f24",bgSecondary:"#32252a",bgTertiary:"#3d2e34",bgElevated:"#48373e",bgHover:"#534048",borderSubtle:"#5e4a52",borderDefault:"#C9ADA7",borderStrong:"#F94144",textPrimary:"#EAD2AC",textSecondary:"#C9ADA7",textTertiary:"#84A98C",textMuted:"#6e5a60",accent:"#F94144",snakeHead:"#EAD2AC",snakeBody:"#C9ADA7",snakeEye:"#2a1f24",snakeEyePupil:"#EAD2AC",foodPrimary:"#F94144",foodGlow:"rgba(249, 65, 68, 0.16)",tongueFill:"#F94144",gridDot:"rgba(201, 173, 167, 0.05)",wallStroke:"rgba(201, 173, 167, 0.1)",shineFill:"rgba(234, 210, 172, 0.12)",shadowFill:"rgba(201, 173, 167, 0.1)",successColor:"#84A98C",dangerColor:"#F94144",canvasBg:"#32252a",vignetteAlpha:.3}},I=["midnight","arctic","emerald","sunset","cyberpunk","ocean","blood","sand","golden","olive","neon","hunter","tropical","matrix","coral","inferno","sakura"];function k(v){const e=w[v];if(!e)return;const t=document.documentElement;t.style.setProperty("--bg-primary",e.bgPrimary),t.style.setProperty("--bg-secondary",e.bgSecondary),t.style.setProperty("--bg-tertiary",e.bgTertiary),t.style.setProperty("--bg-elevated",e.bgElevated),t.style.setProperty("--bg-hover",e.bgHover),t.style.setProperty("--border-subtle",e.borderSubtle),t.style.setProperty("--border-default",e.borderDefault),t.style.setProperty("--border-strong",e.borderStrong),t.style.setProperty("--text-primary",e.textPrimary),t.style.setProperty("--text-secondary",e.textSecondary),t.style.setProperty("--text-tertiary",e.textTertiary),t.style.setProperty("--text-muted",e.textMuted),t.style.setProperty("--accent",e.accent),t.style.setProperty("--snake-head",e.snakeHead),t.style.setProperty("--snake-body",e.snakeBody),t.style.setProperty("--food-primary",e.foodPrimary),t.style.setProperty("--food-glow",e.foodGlow),t.style.setProperty("--success",e.successColor),t.style.setProperty("--danger",e.dangerColor)}function L(v){return w[v]||w.midnight}const P={easy:150,normal:100,hard:70,insane:45},A={small:15,medium:20,large:25};class z{constructor(e){this.canvas=e,this.ctx=e.getContext("2d"),this.input=new T,this.speed="normal",this.gridSizeKey="medium",this.walls=!0,this.gridSize=A.medium,this.themeId="midnight",this.state="home",this.score=0,this.highscore=parseInt(localStorage.getItem("snake-highscore")||"0"),this.snake=new B(this.gridSize),this.food=new F(this.gridSize),this.particles=new D,this.grid=new M(this.gridSize,0,{x:0,y:0}),this.lastUpdate=0,this.accumulator=0,this.moveInterval=P.normal,this.screenShake=0,this.scoreAnimTimer=0,this.lerpProgress=1,this.snapshotPrev=[],this.snapshotCurr=[],this.displayPoints=[],this.loop=this.loop.bind(this),this.setupInput(),this.resize(),window.addEventListener("resize",()=>this.resize())}get theme(){return L(this.themeId)}setTheme(e){this.themeId=e}setupInput(){this.input.on("direction",e=>{this.state==="playing"&&this.snake.queueDirection(e)}),this.input.on("pause",()=>{this.state==="playing"?this.pause():this.state==="paused"&&this.resume()}),this.input.on("enter",()=>{var e,t;this.state==="home"?(e=document.getElementById("play-btn"))==null||e.click():this.state==="gameover"&&((t=document.getElementById("retry-btn"))==null||t.click())}),this.input.on("escape",()=>{this.state==="gameover"?this.toMenu():this.state==="paused"&&this.toMenu()})}resize(){const e=this.canvas.parentElement;if(!e)return;const t=e.getBoundingClientRect(),a=Math.min(t.width-8,t.height-8),s=Math.floor(a);if(s<=0)return;const r=window.devicePixelRatio||1;this.canvas.width=s*r,this.canvas.height=s*r,this.canvas.style.width=`${s}px`,this.canvas.style.height=`${s}px`,this.ctx.setTransform(r,0,0,r,0,0),this.canvasSize=s,this.updateGridMetrics()}updateGridMetrics(){if(!this.canvasSize)return;const t=this.canvasSize-16*2;this.cellSize=Math.floor(t/this.gridSize);const a=this.cellSize*this.gridSize;this.offset={x:(this.canvasSize-a)/2,y:(this.canvasSize-a)/2},this.grid.update(this.gridSize,this.cellSize,this.offset)}configure(e,t,a){this.speed=e,this.gridSizeKey=t,this.walls=a,this.gridSize=A[t],this.moveInterval=P[e]}takeSnapshot(){return this.snake.segments.map(e=>this.grid.cellCenter(e.x,e.y))}start(){this.gridSize=A[this.gridSizeKey],this.moveInterval=P[this.speed],this.score=0,this.snake=new B(this.gridSize),this.food=new F(this.gridSize),this.food.spawn(this.snake),this.particles.clear(),this.screenShake=0,this.updateGridMetrics();const e=this.takeSnapshot();this.snapshotPrev=e.map(t=>({...t})),this.snapshotCurr=e.map(t=>({...t})),this.displayPoints=e.map(t=>({...t})),this.lerpProgress=1,this.state="playing",this.lastUpdate=performance.now(),this.accumulator=0,this.updateUI(),this.showScreen("game"),this.hideOverlay("gameover-overlay"),this.hideOverlay("pause-overlay"),setTimeout(()=>this.resize(),50),this._looping||(this._looping=!0,requestAnimationFrame(this.loop))}pause(){this.state==="playing"&&(this.state="paused",this.showOverlay("pause-overlay"),this.updatePauseButton(!0))}resume(){this.state==="paused"&&(this.state="playing",this.lastUpdate=performance.now(),this.accumulator=0,this.hideOverlay("pause-overlay"),this.updatePauseButton(!1))}toMenu(){this.state="home",this.showScreen("home"),document.getElementById("home-highscore").textContent=this.highscore}gameOver(){this.state="gameover",this.screenShake=8;const e=this.displayPoints[0]||this.grid.cellCenter(this.snake.head.x,this.snake.head.y);this.particles.emit(e.x,e.y,24,this.theme.dangerColor,{speed:160,decay:1.5,size:3.5});let t=!1;this.score>this.highscore&&(this.highscore=this.score,localStorage.setItem("snake-highscore",this.highscore.toString()),t=!0),setTimeout(()=>{document.getElementById("final-score").textContent=this.score;const a=document.getElementById("new-record");t&&this.score>0?a.classList.remove("hidden"):a.classList.add("hidden"),this.showOverlay("gameover-overlay")},600),this.updateUI()}loop(e){if(!this._looping)return;requestAnimationFrame(this.loop);const t=Math.min((e-this.lastUpdate)/1e3,.1);if(this.lastUpdate=e,this.state==="playing"){for(this.accumulator+=t*1e3;this.accumulator>=this.moveInterval;){for(this.accumulator-=this.moveInterval,this.snapshotPrev=this.snapshotCurr.map(a=>({...a})),this.tick(),this.snapshotCurr=this.takeSnapshot();this.snapshotPrev.length<this.snapshotCurr.length;){const a=this.snapshotPrev[this.snapshotPrev.length-1];this.snapshotPrev.push({...a})}this.lerpProgress=0}this.lerpProgress=Math.min(this.accumulator/this.moveInterval,1),this.computeDisplayPoints()}this.food.update(t),this.particles.update(t),this.screenShake>0&&(this.screenShake*=.9,this.screenShake<.1&&(this.screenShake=0)),this.scoreAnimTimer>0&&(this.scoreAnimTimer-=t),this.draw()}tick(){if(this.snake.update(this.walls),this.walls&&this.snake.checkWallCollision()){this.gameOver();return}if(this.snake.checkSelfCollision()){this.gameOver();return}if(this.food.isAt(this.snake.head.x,this.snake.head.y)){this.snake.grow(),this.score+=10,this.scoreAnimTimer=.3;const e=this.grid.cellCenter(this.snake.head.x,this.snake.head.y);this.particles.emit(e.x,e.y,14,this.theme.foodPrimary,{speed:100,decay:2.5,size:2.5}),this.food.spawn(this.snake),this.updateUI();const t=document.getElementById("score");t.classList.add("bump"),setTimeout(()=>t.classList.remove("bump"),200)}}computeDisplayPoints(){const e=this.snapshotPrev,t=this.snapshotCurr,a=t.length,s=this.easeInOutQuad(this.lerpProgress);if(this.displayPoints.length!==a){this.displayPoints=new Array(a);for(let i=0;i<a;i++)this.displayPoints[i]={x:0,y:0}}const r=this.cellSize*2;for(let i=0;i<a;i++){const o=t[i],d=i<e.length?e[i]:o,l=o.x-d.x,n=o.y-d.y;Math.abs(l)>r||Math.abs(n)>r?(this.displayPoints[i].x=o.x,this.displayPoints[i].y=o.y):(this.displayPoints[i].x=d.x+l*s,this.displayPoints[i].y=d.y+n*s)}}easeInOutQuad(e){return e<.5?2*e*e:1-2*(1-e)*(1-e)}splitIntoContinuousChunks(e){const t=[];let a=[];const s=this.cellSize*1.8;for(let r=0;r<e.length;r++)if(a.length===0)a.push(e[r]);else{const i=a[a.length-1],o=e[r].x-i.x,d=e[r].y-i.y;o*o+d*d>s*s?(t.push(a),a=[e[r]]):a.push(e[r])}return a.length>0&&t.push(a),t}buildSmoothPath(e){const t=e.length;if(t<2)return e.map(i=>({...i}));if(t===2)return this.subdivideLine(e[0],e[1],4);const a=[],s=.5,r=[e[0],...e,e[t-1]];for(let i=1;i<r.length-2;i++){const o=r[i-1],d=r[i],l=r[i+1],n=r[i+2],h=l.x-d.x,y=l.y-d.y,g=Math.sqrt(h*h+y*y),b=Math.max(3,Math.min(10,Math.round(g/(this.cellSize*.3))));for(let u=0;u<b;u++){const c=u/b,m=c*c,p=m*c,S=s,E=-S*p+2*S*m-S*c,f=(2-S)*p+(S-3)*m+1,C=(S-2)*p+(3-2*S)*m+S*c,x=S*p-S*m;a.push({x:E*o.x+f*d.x+C*l.x+x*n.x,y:E*o.y+f*d.y+C*l.y+x*n.y})}}return a.push({...e[t-1]}),a}subdivideLine(e,t,a){const s=[];for(let r=0;r<=a;r++){const i=r/a;s.push({x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i})}return s}draw(){const{ctx:e,canvasSize:t}=this;if(!t)return;const a=this.theme;if(e.save(),this.screenShake>0){const r=(Math.random()-.5)*this.screenShake*2,i=(Math.random()-.5)*this.screenShake*2;e.translate(r,i)}e.fillStyle=a.canvasBg,e.fillRect(0,0,t,t);const s=e.createRadialGradient(t/2,t/2,t*.2,t/2,t/2,t*.7);s.addColorStop(0,"transparent"),s.addColorStop(1,`rgba(0,0,0,${a.vignetteAlpha})`),e.fillStyle=s,e.fillRect(0,0,t,t),this.grid.draw(e,a.gridDot),this.walls&&(e.strokeStyle=a.wallStroke,e.lineWidth=2,e.strokeRect(this.offset.x,this.offset.y,this.cellSize*this.gridSize,this.cellSize*this.gridSize)),this.drawFood(e),this.drawSnake(e),this.particles.draw(e),e.restore()}drawFood(e){const t=this.theme,{food:a,grid:s,cellSize:r}=this,i=s.cellCenter(a.position.x,a.position.y),o=Math.sin(a.pulsePhase)*.12+1,d=1-a.spawnAnimation,l=(r/2-3)*o*d;if(l<=0)return;const n=e.createRadialGradient(i.x,i.y,0,i.x,i.y,l*3.5);n.addColorStop(0,t.foodGlow),n.addColorStop(1,"transparent"),e.fillStyle=n,e.beginPath(),e.arc(i.x,i.y,l*3.5,0,Math.PI*2),e.fill(),e.fillStyle=t.foodPrimary,e.shadowColor=t.foodPrimary,e.shadowBlur=14,e.beginPath(),e.arc(i.x,i.y,l,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="rgba(255,255,255,0.4)",e.beginPath(),e.arc(i.x-l*.25,i.y-l*.3,l*.3,0,Math.PI*2),e.fill()}drawSnake(e){const t=this.displayPoints;if(!t||t.length===0)return;const{cellSize:a}=this;if(t.length<2){this.drawSnakeHead(e,t[0],this.snake.direction,a);return}const s=this.splitIntoContinuousChunks(t),r=t.length,i=a*.72,o=a*.15;let d=0;for(let l=0;l<s.length;l++){const n=s[l];if(n.length<2){d+=n.length;continue}const h=this.buildSmoothPath(n);e.save(),e.globalAlpha=.08,e.filter="blur(4px)",this.drawBody(e,h,i+3,o+1,r,d,n.length,!0),e.restore(),this.drawBody(e,h,i,o,r,d,n.length,!1),this.drawShine(e,h,i,o,r,d,n.length),l===0&&this.drawSnakeHead(e,h[0],this.snake.direction,a),d+=n.length}}widthAt(e,t,a){let s;if(e<.06)s=.82+e*3;else if(e<.2)s=1;else{const r=(e-.2)/.8;s=1-r*r*.85}return Math.max(t*s*.5,a*.5)}computeBodyGeometry(e,t,a,s,r,i){const o=e.length,d=new Array(o),l=new Array(o);for(let n=0;n<o;n++){let h,y;n===0?(h=e[1].x-e[0].x,y=e[1].y-e[0].y):n===o-1?(h=e[n].x-e[n-1].x,y=e[n].y-e[n-1].y):(h=e[n+1].x-e[n-1].x,y=e[n+1].y-e[n-1].y);const g=Math.sqrt(h*h+y*y)||1;d[n]={x:-y/g,y:h/g};const b=n/Math.max(o-1,1),u=(r+b*i)/Math.max(s-1,1);l[n]=this.widthAt(u,t,a)}return{normals:d,widths:l}}drawBody(e,t,a,s,r,i,o,d){if(t.length<2)return;const l=this.theme,n=t.length,{normals:h,widths:y}=this.computeBodyGeometry(t,a,s,r,i,o);e.save(),e.beginPath();const g=t[0].x+h[0].x*y[0],b=t[0].y+h[0].y*y[0];e.moveTo(g,b);for(let f=1;f<n;f++)e.lineTo(t[f].x+h[f].x*y[f],t[f].y+h[f].y*y[f]);const u=t[n-1],c=h[n-1],m=y[n-1];e.arc(u.x,u.y,m,Math.atan2(c.y,c.x),Math.atan2(-c.y,-c.x),!1);for(let f=n-2;f>=0;f--)e.lineTo(t[f].x-h[f].x*y[f],t[f].y-h[f].y*y[f]);const p=t[0],S=h[0],E=y[0];e.arc(p.x,p.y,E,Math.atan2(-S.y,-S.x),Math.atan2(S.y,S.x),!1),e.closePath(),d?e.fillStyle=l.shadowFill:e.fillStyle=l.snakeBody,e.fill(),d||(e.strokeStyle=l.wallStroke,e.lineWidth=.5,e.stroke()),e.restore()}drawShine(e,t,a,s,r,i,o){if(t.length<4)return;const d=this.theme,l=t.length,n=Math.floor(l*.6);if(n<3)return;const{normals:h,widths:y}=this.computeBodyGeometry(t.slice(0,n),a,s,r,i,o);e.save(),e.globalAlpha=.1,e.beginPath();for(let g=0;g<n;g++){const b=t[g],u=h[g],c=y[g],m=b.x+u.x*c*.5,p=b.y+u.y*c*.5;g===0?e.moveTo(m+u.x*c*.25,p+u.y*c*.25):e.lineTo(m+u.x*c*.25,p+u.y*c*.25)}for(let g=n-1;g>=0;g--){const b=t[g],u=h[g],c=y[g],m=b.x+u.x*c*.5,p=b.y+u.y*c*.5;e.lineTo(m+u.x*c*.05,p+u.y*c*.05)}e.closePath(),e.fillStyle=d.shineFill,e.fill(),e.restore()}drawSnakeHead(e,t,a,s){const r=this.theme,i=s*.42;e.save();const o=e.createRadialGradient(t.x,t.y,i*.3,t.x,t.y,i*2);o.addColorStop(0,r.foodGlow.replace(/[\d.]+\)$/,"0.06)")),o.addColorStop(1,"transparent"),e.fillStyle=o,e.beginPath(),e.arc(t.x,t.y,i*2,0,Math.PI*2),e.fill(),e.save(),e.translate(t.x,t.y),e.rotate(Math.atan2(a.y,a.x)),e.beginPath(),e.ellipse(i*.08,0,i*1.1,i*.92,0,0,Math.PI*2),e.fillStyle=r.snakeHead,e.fill(),e.strokeStyle=r.wallStroke,e.lineWidth=.5,e.stroke(),e.globalAlpha=.15,e.beginPath(),e.ellipse(-i*.1,-i*.3,i*.5,i*.16,-.2,0,Math.PI*2),e.fillStyle=r.shineFill,e.fill(),e.globalAlpha=1,e.restore(),this.drawEyes(e,t,a,i),this.drawTongue(e,t,a,i),e.restore()}drawEyes(e,t,a,s){const r=this.theme,i=s*.42,o=s*.28,d=s*.2,l=s*.11,n=Math.atan2(a.y,a.x),h=-Math.sin(n),y=Math.cos(n),g=Math.cos(n),b=Math.sin(n);[{x:t.x+h*i+g*o,y:t.y+y*i+b*o},{x:t.x-h*i+g*o,y:t.y-y*i+b*o}].forEach(c=>{e.fillStyle=r.snakeEye,e.beginPath(),e.arc(c.x,c.y,d,0,Math.PI*2),e.fill();const m=g*d*.2,p=b*d*.2;e.fillStyle=r.snakeEyePupil,e.beginPath(),e.arc(c.x+m,c.y+p,l,0,Math.PI*2),e.fill(),e.fillStyle="rgba(255,255,255,0.45)",e.beginPath(),e.arc(c.x+m+l*.3,c.y+p-l*.3,l*.28,0,Math.PI*2),e.fill()})}drawTongue(e,t,a,s){const r=this.theme,i=performance.now()/1e3,o=Math.sin(i*4);if(o<.3)return;const d=(o-.3)/.7,l=Math.atan2(a.y,a.x),n=Math.cos(l),h=Math.sin(l),y=s*.75*d,g=s*.22*d,b=t.x+n*s*.95,u=t.y+h*s*.95,c=b+n*y,m=u+h*y;e.save(),e.strokeStyle=r.tongueFill,e.lineWidth=1.2,e.lineCap="round",e.globalAlpha=.7,e.beginPath(),e.moveTo(b,u),e.lineTo(c,m),e.stroke(),e.beginPath(),e.moveTo(c,m),e.lineTo(c+Math.cos(l-.35)*g,m+Math.sin(l-.35)*g),e.stroke(),e.beginPath(),e.moveTo(c,m),e.lineTo(c+Math.cos(l+.35)*g,m+Math.sin(l+.35)*g),e.stroke(),e.restore()}updateUI(){const e=document.getElementById("score"),t=document.getElementById("highscore"),a=document.getElementById("home-highscore");e&&(e.textContent=this.score),t&&(t.textContent=this.highscore),a&&(a.textContent=this.highscore)}showScreen(e){document.querySelectorAll(".screen").forEach(a=>a.classList.remove("active"));const t=document.getElementById(`${e}-screen`);t&&t.classList.add("active")}showOverlay(e){const t=document.getElementById(e);t&&t.classList.remove("hidden")}hideOverlay(e){const t=document.getElementById(e);t&&t.classList.add("hidden")}updatePauseButton(e){const t=document.querySelector(".pause-icon"),a=document.querySelector(".play-icon");t&&a&&(e?(t.classList.add("hidden"),a.classList.remove("hidden")):(t.classList.remove("hidden"),a.classList.add("hidden")))}}class H{constructor(e){this.game=e,this.currentScreen="home",this.buildThemeSelector(),this.setupHomeListeners(),this.setupSettingsListeners(),this.setupGameListeners(),this.loadSettings(),this.updateHighscoreDisplay()}buildThemeSelector(){const e=document.getElementById("theme-selector");e.innerHTML="",I.forEach(t=>{const a=w[t],s=document.createElement("button");s.className="theme-chip"+(t==="midnight"?" active":""),s.dataset.theme=t,s.title=a.name,s.innerHTML=`
        <span class="theme-chip-preview">
          <span class="tcp-bg" style="background:${a.bgSecondary}"></span>
          <span class="tcp-snake" style="background:${a.snakeBody}"></span>
          <span class="tcp-food" style="background:${a.foodPrimary}"></span>
        </span>
        <span class="theme-chip-label">${a.name}</span>
      `,e.appendChild(s)})}setupHomeListeners(){document.getElementById("play-btn").addEventListener("click",()=>{this.applySettings(),this.game.start()}),document.getElementById("settings-btn").addEventListener("click",()=>{this.showScreen("settings")})}setupSettingsListeners(){document.getElementById("settings-back-btn").addEventListener("click",()=>{this.showScreen("home")}),document.getElementById("theme-selector").addEventListener("click",a=>{const s=a.target.closest(".theme-chip");if(!s)return;document.querySelectorAll(".theme-chip").forEach(i=>i.classList.remove("active")),s.classList.add("active");const r=s.dataset.theme;this.game.setTheme(r),k(r),this.saveSettings()}),document.querySelectorAll(".opt-btn[data-speed]").forEach(a=>{a.addEventListener("click",()=>{document.querySelectorAll(".opt-btn[data-speed]").forEach(s=>s.classList.remove("active")),a.classList.add("active"),this.saveSettings()})}),document.querySelectorAll(".opt-btn[data-grid]").forEach(a=>{a.addEventListener("click",()=>{document.querySelectorAll(".opt-btn[data-grid]").forEach(s=>s.classList.remove("active")),a.classList.add("active"),this.saveSettings()})});const e=document.getElementById("wall-toggle"),t=document.getElementById("wall-label");e.addEventListener("click",()=>{e.classList.toggle("active"),t.textContent=e.classList.contains("active")?"Ativadas":"Desativadas",this.saveSettings()})}setupGameListeners(){document.getElementById("back-btn").addEventListener("click",()=>{this.game.toMenu()}),document.getElementById("pause-btn").addEventListener("click",()=>{this.game.state==="playing"?this.game.pause():this.game.state==="paused"&&this.game.resume()}),document.getElementById("pause-overlay").addEventListener("click",()=>{this.game.resume()}),document.getElementById("retry-btn").addEventListener("click",()=>{this.applySettings(),this.game.start()}),document.getElementById("menu-btn").addEventListener("click",()=>{this.game.toMenu()})}showScreen(e){this.currentScreen=e,document.querySelectorAll(".screen").forEach(t=>t.classList.remove("active")),document.getElementById(`${e}-screen`).classList.add("active")}applySettings(){var r,i,o;const e=((r=document.querySelector(".opt-btn[data-speed].active"))==null?void 0:r.dataset.speed)||"normal",t=((i=document.querySelector(".opt-btn[data-grid].active"))==null?void 0:i.dataset.grid)||"medium",a=document.getElementById("wall-toggle").classList.contains("active"),s=((o=document.querySelector(".theme-chip.active"))==null?void 0:o.dataset.theme)||"midnight";this.game.configure(e,t,a),this.game.setTheme(s),k(s)}saveSettings(){var t,a,s;const e={speed:((t=document.querySelector(".opt-btn[data-speed].active"))==null?void 0:t.dataset.speed)||"normal",grid:((a=document.querySelector(".opt-btn[data-grid].active"))==null?void 0:a.dataset.grid)||"medium",walls:document.getElementById("wall-toggle").classList.contains("active"),theme:((s=document.querySelector(".theme-chip.active"))==null?void 0:s.dataset.theme)||"midnight"};localStorage.setItem("snake-settings",JSON.stringify(e))}loadSettings(){var e,t,a;try{const s=JSON.parse(localStorage.getItem("snake-settings"));if(!s)return;s.speed&&(document.querySelectorAll(".opt-btn[data-speed]").forEach(o=>o.classList.remove("active")),(e=document.querySelector(`.opt-btn[data-speed="${s.speed}"]`))==null||e.classList.add("active")),s.grid&&(document.querySelectorAll(".opt-btn[data-grid]").forEach(o=>o.classList.remove("active")),(t=document.querySelector(`.opt-btn[data-grid="${s.grid}"]`))==null||t.classList.add("active"));const r=document.getElementById("wall-toggle"),i=document.getElementById("wall-label");s.walls===!1?(r.classList.remove("active"),i.textContent="Desativadas"):(r.classList.add("active"),i.textContent="Ativadas"),s.theme&&(document.querySelectorAll(".theme-chip").forEach(o=>o.classList.remove("active")),(a=document.querySelector(`.theme-chip[data-theme="${s.theme}"]`))==null||a.classList.add("active"),this.game.setTheme(s.theme),k(s.theme))}catch{}}updateHighscoreDisplay(){document.getElementById("home-highscore").textContent=this.game.highscore}}document.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("game-canvas"),e=new z(v),t=new H(e);k(e.themeId),e._looping=!0,requestAnimationFrame(e.loop),t.showScreen("home")});
